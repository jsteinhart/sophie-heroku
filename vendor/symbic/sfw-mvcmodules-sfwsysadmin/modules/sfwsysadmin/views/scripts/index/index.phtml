<?php
$module = 'sfwsysadmin';
$this->headLink()->appendStylesheet($this->sfwModuleAssetUrl('module.css', $module));
$this->inlineScript()->appendFile($this->sfwModuleAssetUrl('module.js', $module));

$this->headTitle('System Administration', 'PREPEND');
$this->headTitle('Dashboard', 'PREPEND');
?>
<div class="sfwsysadminDashboard">

<h1 class="sfwsysadminHeadline">System Administration &ndash; Dashboard</h1>

<div class="sfwsysadminDashboardCategoryBlocks">
<?php
	foreach ($this->categories as $category)
	{
		echo '<div class="sfwsysadminDashboardCategoryBlock">';

		echo '<h2>' . $this->escape($category) .'</h2>';

		echo '<div class="actionToolbar">';
		echo '<ul>';

		foreach ($this->components as $component)
		{
			if ((!isset($component['category']) && $category != 'Uncategorized'))
			{
				continue;
			}
			elseif (isset($component['category']) && $category != $component['category'])
			{
				continue;
			}

			if (isset($component['routeName']))
			{
				$routeName = $component['routeName'];
			}
			else
			{
				$routeName = 'default';
			}
			if (isset($component['routeParams']) && is_array($component['routeParams']))
			{
				$routeParams = (array)$component['routeParams'];
			}
			else
			{
				$routeParams = array();
			}

			echo '<li>';
			echo '<a href="' . $this->url($routeParams, $routeName, true) . '">';
			if (isset($component['icon']))
			{
				echo '<img src="' . $component['icon'] . '" title="' .$this->escape($component['name']) . ' Icon" /> ';
			}
			echo $this->escape($component['name']);
			echo '</a>';
			echo '</li>';
		}

		echo '</ul>';
		echo '</div>';
		echo '</div>';
	}
?>
</div>
</div>